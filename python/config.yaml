language:
  version: 3.9

  engines:
    tornado:
      command: ""
    twisted:
      build_deps:
        - gcc
      command: twistd --python=server.py --nodaemon
    gunicorn:
      bootstrap:
        - pip install gunicorn
      command: >
        gunicorn --log-level warning  \
          --bind 0.0.0.0:3000  \
          --reuse-port  \
          --workers $(nproc) \
          --worker-class ${WORKER_CLASS} \
          server:app
    bjoern:
      build_deps:
        - gcc
        - libev-dev
    uwsgi:
      bootstrap:
        - pip install https://projects.unbit.it/downloads/uwsgi-lts.tar.gz # prefer lts version
      command: ""
    waitress:
      command: ""
    uvicorn:
      bootstrap:
        - pip install uvicorn[standard]
      command: uvicorn --host 0.0.0.0 --port 3000 --workers $(nproc) server:app
    hypercorn:
      bootstrap:
        - pip install hypercorn
      command: hypercorn --bind 0.0.0.0:3000 --workers $(nproc) server:app
    daphne:
      bootstrap:
        - pip install daphne
      command: daphne -b 0.0.0.0 -p 3000 server:app

framework:
  files:
    - "**/*.py"
    - requirements.txt
