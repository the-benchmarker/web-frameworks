---
version: v1.0
name: Benchmarking suite
execution_time_limit:
  hours: 24
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu2004
blocks:
- name: setup
  dependencies: []
  task:
    jobs:
    - name: setup
      commands:
      - checkout
      - cache store $SEMAPHORE_GIT_SHA .
      - sudo apt-get update
      - sudo apt-get install build-essential libssl-dev git -y
      - git clone https://github.com/wg/wrk.git wrk
      - cd wrk && make
      - cache store wrk wrk
      - bundle config path .cache
      - bundle install
      - cache store built-in .cache
      - bundle exec rake config
- name: pony
  dependencies:
  - setup
  run:
    when: 'change_in([''/pony/'',''/data.json''],{pipeline_file: ''ignore''})'
  task:
    prologue:
      commands:
      - cache restore $SEMAPHORE_GIT_SHA
      - cache restore wrk
      - sudo install wrk /usr/local/bin
      - cache restore bin
      - cache restore built-in
      - sem-service start postgres
      - createdb -U postgres -h 0.0.0.0 benchmark
      - psql -U postgres -h 0.0.0.0 -d benchmark < dump.sql
      - bundle config path .cache
      - bundle install
      - bundle exec rake config
    jobs:
    - name: jennet
      commands:
      - cd pony/jennet && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f pony/jennet/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: pony/jennet
    epilogue:
      commands:
      - docker logs `cat ${FRAMEWORK}/cid.txt`
- name: go
  dependencies:
  - setup
  run:
    when: 'change_in([''/go/'',''/data.json''],{pipeline_file: ''ignore''})'
  task:
    prologue:
      commands:
      - cache restore $SEMAPHORE_GIT_SHA
      - cache restore wrk
      - sudo install wrk /usr/local/bin
      - cache restore bin
      - cache restore built-in
      - sem-service start postgres
      - createdb -U postgres -h 0.0.0.0 benchmark
      - psql -U postgres -h 0.0.0.0 -d benchmark < dump.sql
      - bundle config path .cache
      - bundle install
      - bundle exec rake config
    jobs:
    - name: fasthttp
      commands:
      - cd go/fasthttp && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f go/fasthttp/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: go/fasthttp
    - name: goyave
      commands:
      - cd go/goyave && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f go/goyave/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: go/goyave
    - name: fiber
      commands:
      - cd go/fiber && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f go/fiber/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: go/fiber
    - name: clevergo
      commands:
      - cd go/clevergo && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f go/clevergo/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: go/clevergo
    - name: apirouter
      commands:
      - cd go/apirouter && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f go/apirouter/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: go/apirouter
    - name: kami
      commands:
      - cd go/kami && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f go/kami/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: go/kami
    - name: tango
      commands:
      - cd go/tango && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f go/tango/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: go/tango
    - name: gramework
      commands:
      - cd go/gramework && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f go/gramework/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: go/gramework
    - name: rte
      commands:
      - cd go/rte && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f go/rte/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: go/rte
    - name: webgo
      commands:
      - cd go/webgo && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f go/webgo/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: go/webgo
    - name: router
      commands:
      - cd go/router && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f go/router/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: go/router
    - name: mars
      commands:
      - cd go/mars && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f go/mars/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: go/mars
    - name: gf
      commands:
      - cd go/gf && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f go/gf/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: go/gf
    - name: echo
      commands:
      - cd go/echo && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f go/echo/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: go/echo
    - name: beego
      commands:
      - cd go/beego && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f go/beego/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: go/beego
    - name: atreugo
      commands:
      - cd go/atreugo && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f go/atreugo/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: go/atreugo
    - name: air
      commands:
      - cd go/air && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f go/air/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: go/air
    - name: macaron
      commands:
      - cd go/macaron && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f go/macaron/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: go/macaron
    - name: gin
      commands:
      - cd go/gin && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f go/gin/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: go/gin
    - name: gearbox
      commands:
      - cd go/gearbox && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f go/gearbox/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: go/gearbox
    - name: chi
      commands:
      - cd go/chi && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f go/chi/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: go/chi
    - name: violetear
      commands:
      - cd go/violetear && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f go/violetear/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: go/violetear
    - name: gorouter
      commands:
      - cd go/gorouter && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f go/gorouter/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: go/gorouter
    - name: gorouter-fasthttp
      commands:
      - cd go/gorouter-fasthttp && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f go/gorouter-fasthttp/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: go/gorouter-fasthttp
    - name: goroute
      commands:
      - cd go/goroute && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f go/goroute/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: go/goroute
    - name: gorilla-mux
      commands:
      - cd go/gorilla-mux && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f go/gorilla-mux/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: go/gorilla-mux
    - name: httprouter
      commands:
      - cd go/httprouter && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f go/httprouter/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: go/httprouter
    - name: aero
      commands:
      - cd go/aero && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f go/aero/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: go/aero
    epilogue:
      commands:
      - docker logs `cat ${FRAMEWORK}/cid.txt`
- name: nim
  dependencies:
  - setup
  run:
    when: 'change_in([''/nim/'',''/data.json''],{pipeline_file: ''ignore''})'
  task:
    prologue:
      commands:
      - cache restore $SEMAPHORE_GIT_SHA
      - cache restore wrk
      - sudo install wrk /usr/local/bin
      - cache restore bin
      - cache restore built-in
      - sem-service start postgres
      - createdb -U postgres -h 0.0.0.0 benchmark
      - psql -U postgres -h 0.0.0.0 -d benchmark < dump.sql
      - bundle config path .cache
      - bundle install
      - bundle exec rake config
    jobs:
    - name: httpbeast
      commands:
      - cd nim/httpbeast && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f nim/httpbeast/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: nim/httpbeast
    - name: akane
      commands:
      - cd nim/akane && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f nim/akane/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: nim/akane
    - name: scorper
      commands:
      - cd nim/scorper && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f nim/scorper/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: nim/scorper
    - name: prologue
      commands:
      - cd nim/prologue && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f nim/prologue/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: nim/prologue
    - name: mike
      commands:
      - cd nim/mike && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f nim/mike/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: nim/mike
    - name: whip
      commands:
      - cd nim/whip && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f nim/whip/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: nim/whip
    - name: rosencrantz
      commands:
      - cd nim/rosencrantz && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f nim/rosencrantz/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: nim/rosencrantz
    - name: jester
      commands:
      - cd nim/jester && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f nim/jester/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: nim/jester
    epilogue:
      commands:
      - docker logs `cat ${FRAMEWORK}/cid.txt`
- name: python
  dependencies:
  - setup
  run:
    when: 'change_in([''/python/'',''/data.json''],{pipeline_file: ''ignore''})'
  task:
    prologue:
      commands:
      - cache restore $SEMAPHORE_GIT_SHA
      - cache restore wrk
      - sudo install wrk /usr/local/bin
      - cache restore bin
      - cache restore built-in
      - sem-service start postgres
      - createdb -U postgres -h 0.0.0.0 benchmark
      - psql -U postgres -h 0.0.0.0 -d benchmark < dump.sql
      - bundle config path .cache
      - bundle install
      - bundle exec rake config
    jobs:
    - name: klein
      commands:
      - cd python/klein && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f python/klein/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: python/klein
    - name: index.py
      commands:
      - cd python/index.py && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f python/index.py/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: python/index.py
    - name: emmett
      commands:
      - cd python/emmett && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f python/emmett/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: python/emmett
    - name: django-ninja
      commands:
      - cd python/django-ninja && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f python/django-ninja/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: python/django-ninja
    - name: tornado
      commands:
      - cd python/tornado && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f python/tornado/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: python/tornado
    - name: tonberry
      commands:
      - cd python/tonberry && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f python/tonberry/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: python/tonberry
    - name: starlette
      commands:
      - cd python/starlette && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f python/starlette/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: python/starlette
    - name: sanic
      commands:
      - cd python/sanic && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f python/sanic/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: python/sanic
    - name: responder
      commands:
      - cd python/responder && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f python/responder/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: python/responder
    - name: quart
      commands:
      - cd python/quart && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f python/quart/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: python/quart
    - name: pyramid
      commands:
      - cd python/pyramid && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f python/pyramid/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: python/pyramid
    - name: nameko
      commands:
      - cd python/nameko && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f python/nameko/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: python/nameko
    - name: molten
      commands:
      - cd python/molten && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f python/molten/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: python/molten
    - name: masonite
      commands:
      - cd python/masonite && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f python/masonite/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: python/masonite
    - name: hug
      commands:
      - cd python/hug && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f python/hug/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: python/hug
    - name: guillotina
      commands:
      - cd python/guillotina && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f python/guillotina/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: python/guillotina
    - name: flask
      commands:
      - cd python/flask && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f python/flask/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: python/flask
    - name: fastapi
      commands:
      - cd python/fastapi && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f python/fastapi/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: python/fastapi
    - name: falcon
      commands:
      - cd python/falcon && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f python/falcon/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: python/falcon
    - name: django
      commands:
      - cd python/django && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f python/django/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: python/django
    - name: cyclone
      commands:
      - cd python/cyclone && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f python/cyclone/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: python/cyclone
    - name: clastic
      commands:
      - cd python/clastic && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f python/clastic/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: python/clastic
    - name: cherrypy
      commands:
      - cd python/cherrypy && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f python/cherrypy/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: python/cherrypy
    - name: bottle
      commands:
      - cd python/bottle && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f python/bottle/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: python/bottle
    - name: blacksheep
      commands:
      - cd python/blacksheep && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f python/blacksheep/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: python/blacksheep
    - name: baize-wsgi
      commands:
      - cd python/baize-wsgi && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f python/baize-wsgi/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: python/baize-wsgi
    - name: baize-asgi
      commands:
      - cd python/baize-asgi && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f python/baize-asgi/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: python/baize-asgi
    - name: asgineer
      commands:
      - cd python/asgineer && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f python/asgineer/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: python/asgineer
    - name: apidaora
      commands:
      - cd python/apidaora && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f python/apidaora/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: python/apidaora
    - name: aiohttp
      commands:
      - cd python/aiohttp && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f python/aiohttp/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: python/aiohttp
    epilogue:
      commands:
      - docker logs `cat ${FRAMEWORK}/cid.txt`
- name: clojure
  dependencies:
  - setup
  run:
    when: 'change_in([''/clojure/'',''/data.json''],{pipeline_file: ''ignore''})'
  task:
    prologue:
      commands:
      - cache restore $SEMAPHORE_GIT_SHA
      - cache restore wrk
      - sudo install wrk /usr/local/bin
      - cache restore bin
      - cache restore built-in
      - sem-service start postgres
      - createdb -U postgres -h 0.0.0.0 benchmark
      - psql -U postgres -h 0.0.0.0 -d benchmark < dump.sql
      - bundle config path .cache
      - bundle install
      - bundle exec rake config
    jobs:
    - name: luminus
      commands:
      - cd clojure/luminus && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f clojure/luminus/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: clojure/luminus
    - name: donkey
      commands:
      - cd clojure/donkey && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f clojure/donkey/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: clojure/donkey
    - name: yada
      commands:
      - cd clojure/yada && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f clojure/yada/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: clojure/yada
    - name: coast      commands:
      - cd clojure/coast && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f clojure/coast/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: clojure/coast
    epilogue:
      commands:
      - docker logs `cat ${FRAMEWORK}/cid.txt`
- name: elixir
  dependencies:
  - setup
  run:
    when: 'change_in([''/elixir/'',''/data.json''],{pipeline_file: ''ignore''})'
  task:
    prologue:
      commands:
      - cache restore $SEMAPHORE_GIT_SHA
      - cache restore wrk
      - sudo install wrk /usr/local/bin
      - cache restore bin
      - cache restore built-in
      - sem-service start postgres
      - createdb -U postgres -h 0.0.0.0 benchmark
      - psql -U postgres -h 0.0.0.0 -d benchmark < dump.sql
      - bundle config path .cache
      - bundle install
      - bundle exec rake config
    jobs:
    - name: plug
      commands:
      - cd elixir/plug && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f elixir/plug/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: elixir/plug
    - name: cowboy_stream
      commands:
      - cd elixir/cowboy_stream && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f elixir/cowboy_stream/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: elixir/cowboy_stream
    - name: cowboy
      commands:
      - cd elixir/cowboy && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f elixir/cowboy/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK        
      value: elixir/cowboy
    - name: phoenix
      commands:
      - cd elixir/phoenix && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f elixir/phoenix/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: elixir/phoenix
    epilogue:
      commands:
      - docker logs `cat ${FRAMEWORK}/cid.txt`
- name: dart
  dependencies:
  - setup
  run:
    when: 'change_in([''/dart/'',''/data.json''],{pipeline_file: ''ignore''})'
  task:
    prologue:
      commands:
      - cache restore $SEMAPHORE_GIT_SHA
      - cache restore wrk
      - sudo install wrk /usr/local/bin
      - cache restore bin
      - cache restore built-in
      - sem-service start postgres
      - createdb -U postgres -h 0.0.0.0 benchmark
      - psql -U postgres -h 0.0.0.0 -d benchmark < dump.sql
      - bundle config path .cache
      - bundle install
      - bundle exec rake config
    jobs:
    - name: start
      commands:
      - cd dart/start && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f dart/start/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: dart/start
    epilogue:
      commands:
      - docker logs `cat ${FRAMEWORK}/cid.txt`
- name: perl
  dependencies:
  - setup
  run:
    when: 'change_in([''/perl/'',''/data.json''],{pipeline_file: ''ignore''})'
  task:
    prologue:
      commands:
      - cache restore $SEMAPHORE_GIT_SHA
      - cache restore wrk
      - sudo install wrk /usr/local/bin
      - cache restore bin
      - cache restore built-in
      - sem-service start postgres
      - createdb -U postgres -h 0.0.0.0 benchmark
      - psql -U postgres -h 0.0.0.0 -d benchmark < dump.sql
      - bundle config path .cache
      - bundle install
      - bundle exec rake config
    jobs:
    - name: dancer2
      commands:
      - cd perl/dancer2 && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f perl/dancer2/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: perl/dancer2
    epilogue:
      commands:
      - docker logs `cat ${FRAMEWORK}/cid.txt`
- name: rust
  dependencies:
  - setup
  run:
    when: 'change_in([''/rust/'',''/data.json''],{pipeline_file: ''ignore''})'
  task:
    prologue:
      commands:
      - cache restore $SEMAPHORE_GIT_SHA
      - cache restore wrk
      - sudo install wrk /usr/local/bin
      - cache restore bin
      - cache restore built-in
      - sem-service start postgres
      - createdb -U postgres -h 0.0.0.0 benchmark
      - psql -U postgres -h 0.0.0.0 -d benchmark < dump.sql
      - bundle config path .cache
      - bundle install
      - bundle exec rake config
    jobs:
    - name: salvo
      commands:
      - cd rust/salvo && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f rust/salvo/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: rust/salvo
    - name: iron
      commands:
      - cd rust/iron && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f rust/iron/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: rust/iron
    - name: gotham
      commands:
      - cd rust/gotham && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f rust/gotham/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: rust/gotham
    - name: actix
      commands:
      - cd rust/actix && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f rust/actix/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: rust/actix
    - name: nickel
      commands:
      - cd rust/nickel && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f rust/nickel/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: rust/nickel
    epilogue:
      commands:
      - docker logs `cat ${FRAMEWORK}/cid.txt`
- name: fsharp
  dependencies:
  - setup
  run:
    when: 'change_in([''/fsharp/'',''/data.json''],{pipeline_file: ''ignore''})'
  task:
    prologue:
      commands:
      - cache restore $SEMAPHORE_GIT_SHA
      - cache restore wrk
      - sudo install wrk /usr/local/bin
      - cache restore bin
      - cache restore built-in
      - sem-service start postgres
      - createdb -U postgres -h 0.0.0.0 benchmark
      - psql -U postgres -h 0.0.0.0 -d benchmark < dump.sql
      - bundle config path .cache
      - bundle install
      - bundle exec rake config
    jobs:
    - name: falco
      commands:
      - cd fsharp/falco && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f fsharp/falco/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: fsharp/falco
    - name: websharper
      commands:
      - cd fsharp/websharper && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f fsharp/websharper/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: fsharp/websharper
    - name: suave
      commands:
      - cd fsharp/suave && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f fsharp/suave/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: fsharp/suave
    - name: frank
      commands:
      - cd fsharp/frank && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f fsharp/frank/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: fsharp/frank
    - name: saturn
      commands:
      - cd fsharp/saturn && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f fsharp/saturn/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: fsharp/saturn
    - name: giraffe
      commands:
      - cd fsharp/giraffe && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f fsharp/giraffe/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: fsharp/giraffe
    epilogue:
      commands:
      - docker logs `cat ${FRAMEWORK}/cid.txt`
- name: r
  dependencies:
  - setup
  run:
    when: 'change_in([''/r/'',''/data.json''],{pipeline_file: ''ignore''})'
  task:
    prologue:
      commands:
      - cache restore $SEMAPHORE_GIT_SHA
      - cache restore wrk
      - sudo install wrk /usr/local/bin
      - cache restore bin
      - cache restore built-in
      - sem-service start postgres
      - createdb -U postgres -h 0.0.0.0 benchmark
      - psql -U postgres -h 0.0.0.0 -d benchmark < dump.sql
      - bundle config path .cache
      - bundle install
      - bundle exec rake config
    jobs:
    - name: rserve
      commands:
      - cd r/rserve && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f r/rserve/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: r/rserve
    - name: restrserve
      commands:
      - cd r/restrserve && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f r/restrserve/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: r/restrserve
    - name: httpuv
      commands:
      - cd r/httpuv && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f r/httpuv/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: r/httpuv
    - name: plumber
      commands:
      - cd r/plumber && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f r/plumber/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: r/plumber
    epilogue:
      commands:
      - docker logs `cat ${FRAMEWORK}/cid.txt`
- name: java
  dependencies:
  - setup
  run:
    when: 'change_in([''/java/'',''/data.json''],{pipeline_file: ''ignore''})'
  task:
    prologue:
      commands:
      - cache restore $SEMAPHORE_GIT_SHA
      - cache restore wrk
      - sudo install wrk /usr/local/bin
      - cache restore bin
      - cache restore built-in
      - sem-service start postgres
      - createdb -U postgres -h 0.0.0.0 benchmark
      - psql -U postgres -h 0.0.0.0 -d benchmark < dump.sql
      - bundle config path .cache
      - bundle install
      - bundle exec rake config
    jobs:
    - name: quarkus
      commands:
      - cd java/quarkus && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f java/quarkus/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: java/quarkus
    - name: micronaut
      commands:
      - cd java/micronaut && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f java/micronaut/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: java/micronaut
    - name: javalin
      commands:
      - cd java/javalin && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f java/javalin/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: java/javalin
    - name: jersey-grizzly2
      commands:
      - cd java/jersey-grizzly2 && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f java/jersey-grizzly2/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: java/jersey-grizzly2
    - name: struts2
      commands:
      - cd java/struts2 && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f java/struts2/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: java/struts2
    - name: vertx4web
      commands:
      - cd java/vertx4web && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f java/vertx4web/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: java/vertx4web
    - name: vertx
      commands:
      - cd java/vertx && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f java/vertx/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: java/vertx
    - name: spring
      commands:
      - cd java/spring && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f java/spring/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: java/spring
    - name: restheart
      commands:
      - cd java/restheart && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f java/restheart/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: java/restheart
    - name: jooby
      commands:
      - cd java/jooby && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f java/jooby/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: java/jooby
    - name: activej
      commands:
      - cd java/activej && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f java/activej/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: java/activej
    - name: undertow
      commands:
      - cd java/undertow && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f java/undertow/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: java/undertow
    - name: spark
      commands:
      - cd java/spark && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f java/spark/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: java/spark
    - name: rapidoid
      commands:
      - cd java/rapidoid && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f java/rapidoid/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: java/rapidoid
    - name: light-4j
      commands:
      - cd java/light-4j && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f java/light-4j/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: java/light-4j
    - name: jersey3-grizzly2
      commands:
      - cd java/jersey3-grizzly2 && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f java/jersey3-grizzly2/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: java/jersey3-grizzly2
    - name: act
      commands:
      - cd java/act && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f java/act/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: java/act
    - name: blade
      commands:
      - cd java/blade && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f java/blade/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: java/blade
    epilogue:
      commands:
      - docker logs `cat ${FRAMEWORK}/cid.txt`
- name: kotlin
  dependencies:
  - setup
  run:
    when: 'change_in([''/kotlin/'',''/data.json''],{pipeline_file: ''ignore''})'
  task:
    prologue:
      commands:
      - cache restore $SEMAPHORE_GIT_SHA
      - cache restore wrk
      - sudo install wrk /usr/local/bin
      - cache restore bin
      - cache restore built-in
      - sem-service start postgres
      - createdb -U postgres -h 0.0.0.0 benchmark
      - psql -U postgres -h 0.0.0.0 -d benchmark < dump.sql
      - bundle config path .cache
      - bundle install
      - bundle exec rake config
    jobs:
    - name: ktor
      commands:
      - cd kotlin/ktor && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f kotlin/ktor/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: kotlin/ktor
    - name: kooby
      commands:
      - cd kotlin/kooby && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f kotlin/kooby/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: kotlin/kooby
    - name: http4k
      commands:
      - cd kotlin/http4k && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f kotlin/http4k/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: kotlin/http4k
    epilogue:
      commands:
      - docker logs `cat ${FRAMEWORK}/cid.txt`
- name: crystal
  dependencies:
  - setup
  run:
    when: 'change_in([''/crystal/'',''/data.json''],{pipeline_file: ''ignore''})'
  task:
    prologue:
      commands:
      - cache restore $SEMAPHORE_GIT_SHA
      - cache restore wrk
      - sudo install wrk /usr/local/bin
      - cache restore bin
      - cache restore built-in
      - sem-service start postgres
      - createdb -U postgres -h 0.0.0.0 benchmark
      - psql -U postgres -h 0.0.0.0 -d benchmark < dump.sql
      - bundle config path .cache
      - bundle install
      - bundle exec rake config
    jobs:
    - name: kemal
      commands:
      - cd crystal/kemal && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f crystal/kemal/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: crystal/kemal
    - name: spider-gazelle
      commands:
      - cd crystal/spider-gazelle && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f crystal/spider-gazelle/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: crystal/spider-gazelle
    - name: shivneri
      commands:
      - cd crystal/shivneri && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f crystal/shivneri/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: crystal/shivneri
    - name: runcobo
      commands:
      - cd crystal/runcobo && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f crystal/runcobo/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: crystal/runcobo
    - name: athena
      commands:
      - cd crystal/athena && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f crystal/athena/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: crystal/athena
    - name: amber
      commands:
      - cd crystal/amber && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f crystal/amber/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: crystal/amber
    - name: grip
      commands:
      - cd crystal/grip && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f crystal/grip/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: crystal/grip
    - name: toro
      commands:
      - cd crystal/toro && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f crystal/toro/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: crystal/toro
    - name: router.cr
      commands:
      - cd crystal/router.cr && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f crystal/router.cr/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: crystal/router.cr
    - name: orion
      commands:
      - cd crystal/orion && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f crystal/orion/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: crystal/orion
    epilogue:
      commands:
      - docker logs `cat ${FRAMEWORK}/cid.txt`
- name: haskell
  dependencies:
  - setup
  run:
    when: 'change_in([''/haskell/'',''/data.json''],{pipeline_file: ''ignore''})'
  task:
    prologue:
      commands:
      - cache restore $SEMAPHORE_GIT_SHA
      - cache restore wrk
      - sudo install wrk /usr/local/bin
      - cache restore bin
      - cache restore built-in
      - sem-service start postgres
      - createdb -U postgres -h 0.0.0.0 benchmark
      - psql -U postgres -h 0.0.0.0 -d benchmark < dump.sql
      - bundle config path .cache
      - bundle install
      - bundle exec rake config
    jobs:
    - name: servant
      commands:
      - cd haskell/servant && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f haskell/servant/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: haskell/servant
    - name: scotty
      commands:
      - cd haskell/scotty && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f haskell/scotty/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: haskell/scotty
    epilogue:
      commands:
      - docker logs `cat ${FRAMEWORK}/cid.txt`
- name: php
  dependencies:
  - setup
  run:
    when: 'change_in([''/php/'',''/data.json''],{pipeline_file: ''ignore''})'
  task:
    prologue:
      commands:
      - cache restore $SEMAPHORE_GIT_SHA
      - cache restore wrk
      - sudo install wrk /usr/local/bin
      - cache restore bin
      - cache restore built-in
      - sem-service start postgres
      - createdb -U postgres -h 0.0.0.0 benchmark
      - psql -U postgres -h 0.0.0.0 -d benchmark < dump.sql
      - bundle config path .cache
      - bundle install
      - bundle exec rake config
    jobs:
    - name: tower
      commands:
      - cd php/tower && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/tower/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/tower
    - name: workerman
      commands:
      - cd php/workerman && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/workerman/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/workerman
    - name: webman
      commands:
      - cd php/webman && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/webman/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/webman
    - name: tower
      commands:
      - cd php/tower && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/tower/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/tower
    - name: mixphp-workerman
      commands:
      - cd php/ice && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/ice/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/ice
    - name: codeigniter4
      commands:
      - cd php/codeigniter4 && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/codeigniter4/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/codeigniter4
    - name: chubbyphp-workerman
      commands:
      - cd php/chubbyphp-workerman && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/chubbyphp-workerman/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/chubbyphp-workerman
    - name: antidot
      commands:
      - cd php/antidot && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/antidot/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/antidot
    - name: phalcon
      commands:
      - cd php/phalcon && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/phalcon/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/phalcon
    - name: nano
      commands:
      - cd php/nano && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/nano/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/nano
    - name: laravel
      commands:
      - cd php/laravel && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/laravel/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/antidot
    - name: phalcon
      commands:
      - cd php/phalcon && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/phalcon/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/phalcon
    - name: nano
      commands:
      - cd php/nano && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/nano/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/nano
    - name: imi-swoole
      commands:
      - cd php/imi-swoole && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/imi-swoole/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/imi-swoole
    - name: mixphp
      commands:
      - cd php/mixphp && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/mixphp/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/mixphp
    - name: mixphp-swoole
      commands:
      - cd php/mixphp-swoole && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/mixphp-swoole/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/mixphp-swoole
    - name: mezzio
      commands:
      - cd php/mezzio && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/mezzio/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/mezzio
    - name: yii
      commands:
      - cd php/yii && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/yii/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/yii
    - name: yii-swoole
      commands:
      - cd php/yii-swoole && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/yii-swoole/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/yii-swoole
    - name: ubiquity
      commands:
      - cd php/ubiquity && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/ubiquity/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/ubiquity
    - name: symfony
      commands:
      - cd php/symfony && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/symfony/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/symfony
    - name: swoole
      commands:
      - cd php/swoole && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/swoole/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/swoole
    - name: swoole-coroutine
      commands:
      - cd php/swoole-coroutine && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/swoole-coroutine/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/swoole-coroutine
    - name: swoft
      commands:
      - cd php/swoft && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/swoft/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/swoft
    - name: sw-fw-less
      commands:
      - cd php/sw-fw-less && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/sw-fw-less/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/sw-fw-less
    - name: sunrise-router
      commands:
      - cd php/sunrise-router && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/sunrise-router/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/sunrise-router
    - name: sunrise-router-roadrunner
      commands:
      - cd php/sunrise-router-roadrunner && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/sunrise-router-roadrunner/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/sunrise-router-roadrunner
    - name: sunrise-router-annotations
      commands:
      - cd php/sunrise-router-annotations && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/sunrise-router-annotations/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/sunrise-router-annotations
    - name: spiral
      commands:
      - cd php/spiral && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/spiral/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/spiral
    - name: slim
      commands:
      - cd php/slim && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/slim/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/slim
    - name: slim-swoole
      commands:
      - cd php/slim-swoole && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/slim-swoole/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/slim-swoole
    - name: slim-roadrunner
      commands:
      - cd php/slim-roadrunner && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/slim-roadrunner/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/slim-roadrunner
    - name: simps
      commands:
      - cd php/simps && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/simps/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/simps
    - name: siler
      commands:
      - cd php/siler && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/siler/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/siler
    - name: siler-swoole
      commands:
      - cd php/siler-swoole && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/siler-swoole/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/siler-swoole
    - name: one
      commands:
      - cd php/one && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/one/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/one
    - name: one-fpm
      commands:
      - cd php/one-fpm && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/one-fpm/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/one-fpm
    - name: nette
      commands:
      - cd php/nette && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/nette/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/nette
    - name: mark
      commands:
      - cd php/mark && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/mark/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/mark
    - name: lumen
      commands:
      - cd php/lumen && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/lumen/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/lumen
    - name: laravel-s-lumen
      commands:
      - cd php/laravel-s-lumen && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/laravel-s-lumen/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/laravel-s-lumen
    - name: laravel-s-laravel
      commands:
      - cd php/laravel-s-laravel && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/laravel-s-laravel/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/laravel-s-laravel
    - name: laminas
      commands:
      - cd php/laminas && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/laminas/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/laminas
    - name: hyperf
      commands:
      - cd php/hyperf && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/hyperf/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/hyperf
    - name: driftphp
      commands:
      - cd php/driftphp && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/driftphp/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/driftphp
    - name: cubex
      commands:
      - cd php/cubex && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/cubex/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/cubex
    - name: comet
      commands:
      - cd php/comet && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/comet/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/comet
    - name: chubbyphp
      commands:
      - cd php/chubbyphp && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/chubbyphp/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/chubbyphp
    - name: chubbyphp-swoole
      commands:
      - cd php/chubbyphp-swoole && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/chubbyphp-swoole/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/chubbyphp-swoole
    - name: chubbyphp-roadrunner
      commands:
      - cd php/chubbyphp-roadrunner && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/chubbyphp-roadrunner/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/chubbyphp-roadrunner
    - name: bearframework
      commands:
      - cd php/bearframework && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f php/bearframework/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: php/bearframework
    epilogue:
      commands:
      - docker logs `cat ${FRAMEWORK}/cid.txt`
- name: scala
  dependencies:
  - setup
  run:
    when: 'change_in([''/scala/'',''/data.json''],{pipeline_file: ''ignore''})'
  task:
    prologue:
      commands:
      - cache restore $SEMAPHORE_GIT_SHA
      - cache restore wrk
      - sudo install wrk /usr/local/bin
      - cache restore bin
      - cache restore built-in
      - sem-service start postgres
      - createdb -U postgres -h 0.0.0.0 benchmark
      - psql -U postgres -h 0.0.0.0 -d benchmark < dump.sql
      - bundle config path .cache
      - bundle install
      - bundle exec rake config
    jobs:
    - name: finatra
      commands:
      - cd scala/finatra && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f scala/finatra/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: scala/finatra
    - name: http4s
      commands:
      - cd scala/http4s && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f scala/http4s/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: scala/http4s
    - name: finch
      commands:
      - cd scala/finch && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f scala/finch/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: scala/finch
    - name: akkahttp
      commands:
      - cd scala/akkahttp && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f scala/akkahttp/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: scala/akkahttp
    - name: play
      commands:
      - cd scala/play && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f scala/play/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: scala/play
    epilogue:
      commands:
      - docker logs `cat ${FRAMEWORK}/cid.txt`
- name: cpp
  dependencies:
  - setup
  run:
    when: 'change_in([''/cpp/'',''/data.json''],{pipeline_file: ''ignore''})'
  task:
    prologue:
      commands:
      - cache restore $SEMAPHORE_GIT_SHA
      - cache restore wrk
      - sudo install wrk /usr/local/bin
      - cache restore bin
      - cache restore built-in
      - sem-service start postgres
      - createdb -U postgres -h 0.0.0.0 benchmark
      - psql -U postgres -h 0.0.0.0 -d benchmark < dump.sql
      - bundle config path .cache
      - bundle install
      - bundle exec rake config
    jobs:
    - name: drogon
      commands:
      - cd cpp/drogon && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f cpp/drogon/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: cpp/drogon
    - name: nawa
      commands:
      - cd cpp/nawa && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f cpp/nawa/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: cpp/nawa
    - name: evhtp
      commands:
      - cd cpp/evhtp && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f cpp/evhtp/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: cpp/evhtp
    epilogue:
      commands:
      - docker logs `cat ${FRAMEWORK}/cid.txt`
- name: swift
  dependencies:
  - setup
  run:
    when: 'change_in([''/swift/'',''/data.json''],{pipeline_file: ''ignore''})'
  task:
    prologue:
      commands:
      - cache restore $SEMAPHORE_GIT_SHA
      - cache restore wrk
      - sudo install wrk /usr/local/bin
      - cache restore bin
      - cache restore built-in
      - sem-service start postgres
      - createdb -U postgres -h 0.0.0.0 benchmark
      - psql -U postgres -h 0.0.0.0 -d benchmark < dump.sql
      - bundle config path .cache
      - bundle install
      - bundle exec rake config
    jobs:
    - name: hummingbird-framework
      commands:
      - cd swift/hummingbird-framework && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f swift/hummingbird-framework/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: swift/hummingbird-framework
    - name: vapor-framework
      commands:
      - cd swift/vapor-framework && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f swift/vapor-framework/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: swift/vapor-framework
    - name: kitura
      commands:
      - cd swift/kitura && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f swift/kitura/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: swift/kitura
    - name: kitura-nio
      commands:
      - cd swift/kitura-nio && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f swift/kitura-nio/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: swift/kitura-nio
    - name: swifter-framework
      commands:
      - cd swift/swifter-framework && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f swift/swifter-framework/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: swift/swifter-framework
    - name: perfect
      commands:
      - cd swift/perfect && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f swift/perfect/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: swift/perfect
    epilogue:
      commands:
      - docker logs `cat ${FRAMEWORK}/cid.txt`
- name: csharp
  dependencies:
  - setup
  run:
    when: 'change_in([''/csharp/'',''/data.json''],{pipeline_file: ''ignore''})'
  task:
    prologue:
      commands:
      - cache restore $SEMAPHORE_GIT_SHA
      - cache restore wrk
      - sudo install wrk /usr/local/bin
      - cache restore bin
      - cache restore built-in
      - sem-service start postgres
      - createdb -U postgres -h 0.0.0.0 benchmark
      - psql -U postgres -h 0.0.0.0 -d benchmark < dump.sql
      - bundle config path .cache
      - bundle install
      - bundle exec rake config
    jobs:
    - name: beetlex
      commands:
      - cd csharp/beetlex && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f csharp/beetlex/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: csharp/beetlex
    - name: simplify.web
      commands:
      - cd csharp/simplify.web && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f csharp/simplify.web/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: csharp/simplify.web
    - name: carter
      commands:
      - cd csharp/carter && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f csharp/carter/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: csharp/carter
    - name: aspnetcore
      commands:
      - cd csharp/aspnetcore && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f csharp/aspnetcore/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: csharp/aspnetcore
    epilogue:
      commands:
      - docker logs `cat ${FRAMEWORK}/cid.txt`
- name: julia
  dependencies:
  - setup
  run:
    when: 'change_in([''/julia/'',''/data.json''],{pipeline_file: ''ignore''})'
  task:
    prologue:
      commands:
      - cache restore $SEMAPHORE_GIT_SHA
      - cache restore wrk
      - sudo install wrk /usr/local/bin
      - cache restore bin
      - cache restore built-in
      - sem-service start postgres
      - createdb -U postgres -h 0.0.0.0 benchmark
      - psql -U postgres -h 0.0.0.0 -d benchmark < dump.sql
      - bundle config path .cache
      - bundle install
      - bundle exec rake config
    jobs:
    - name: merly
      commands:
      - cd julia/merly && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f julia/merly/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: julia/merly
    epilogue:
      commands:
      - docker logs `cat ${FRAMEWORK}/cid.txt`
- name: javascript
  dependencies:
  - setup
  run:
    when: 'change_in([''/javascript/'',''/data.json''],{pipeline_file: ''ignore''})'
  task:
    prologue:
      commands:
      - cache restore $SEMAPHORE_GIT_SHA
      - cache restore wrk
      - sudo install wrk /usr/local/bin
      - cache restore bin
      - cache restore built-in
      - sem-service start postgres
      - createdb -U postgres -h 0.0.0.0 benchmark
      - psql -U postgres -h 0.0.0.0 -d benchmark < dump.sql
      - bundle config path .cache
      - bundle install
      - bundle exec rake config
    jobs:
    - name: fyrejet
      commands:
      - cd javascript/fyrejet && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f javascript/fyrejet/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: javascript/fyrejet
    - name: fyrejet-uwebsockets
      commands:
      - cd javascript/fyrejet-uwebsockets && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f javascript/fyrejet-uwebsockets/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: javascript/fyrejet-uwebsockets
    - name: sails
      commands:
      - cd javascript/sails && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f javascript/sails/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: javascript/sails
    - name: nestjs-fastify
      commands:
      - cd javascript/nestjs-fastify && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f javascript/nestjs-fastify/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: javascript/nestjs-fastify
    - name: nestjs-express
      commands:
      - cd javascript/nestjs-express && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f javascript/nestjs-express/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: javascript/nestjs-express
    - name: nanoexpress
      commands:
      - cd javascript/nanoexpress && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f javascript/nanoexpress/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: javascript/nanoexpress
    - name: fastify
      commands:
      - cd javascript/fastify && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f javascript/fastify/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: javascript/fastify
    - name: chubbyjs
      commands:
      - cd javascript/chubbyjs && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f javascript/chubbyjs/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: javascript/chubbyjs
    - name: tinyhttp
      commands:
      - cd javascript/tinyhttp && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f javascript/tinyhttp/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: javascript/tinyhttp
    - name: turbo_polka
      commands:
      - cd javascript/turbo_polka && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f javascript/turbo_polka/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: javascript/turbo_polka
    - name: sifrr
      commands:
      - cd javascript/sifrr && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f javascript/sifrr/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: javascript/sifrr
    - name: naturaljs-router
      commands:
      - cd javascript/naturaljs-router && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f javascript/naturaljs-router/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: javascript/naturaljs-router
    - name: low-http-server
      commands:
      - cd javascript/low-http-server && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f javascript/low-http-server/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: javascript/low-http-server
    - name: 0http
      commands:
      - cd javascript/0http && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f javascript/0http/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: javascript/0http
    - name: restana
      commands:
      - cd javascript/restana && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f javascript/restana/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: javascript/restana
    - name: hapi
      commands:
      - cd javascript/hapi && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f javascript/hapi/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: javascript/hapi
    - name: restify
      commands:
      - cd javascript/restify && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f javascript/restify/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: javascript/restify
    - name: rayo
      commands:
      - cd javascript/rayo && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f javascript/rayo/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: javascript/rayo
    - name: polkadot
      commands:
      - cd javascript/polkadot && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f javascript/polkadot/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: javascript/polkadot
    - name: polka
      commands:
      - cd javascript/polka && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f javascript/polka/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: javascript/polka
    - name: muneem
      commands:
      - cd javascript/muneem && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f javascript/muneem/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: javascript/muneem
    - name: iotjs-express
      commands:
      - cd javascript/iotjs-express && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f javascript/iotjs-express/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: javascript/iotjs-express
    - name: foxify
      commands:
      - cd javascript/foxify && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f javascript/foxify/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: javascript/foxify
    - name: feathersjs
      commands:
      - cd javascript/feathersjs && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f javascript/feathersjs/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: javascript/feathersjs
    - name: express
      commands:
      - cd javascript/express && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f javascript/express/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: javascript/express
    - name: koa
      commands:
      - cd javascript/koa && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f javascript/koa/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: javascript/koa
    - name: moleculer
      commands:
      - cd javascript/moleculer && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f javascript/moleculer/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: javascript/moleculer
    epilogue:
      commands:
      - docker logs `cat ${FRAMEWORK}/cid.txt`
- name: c
  dependencies:
  - setup
  run:
    when: 'change_in([''/c/'',''/data.json''],{pipeline_file: ''ignore''})'
  task:
    prologue:
      commands:
      - cache restore $SEMAPHORE_GIT_SHA
      - cache restore wrk
      - sudo install wrk /usr/local/bin
      - cache restore bin
      - cache restore built-in
      - sem-service start postgres
      - createdb -U postgres -h 0.0.0.0 benchmark
      - psql -U postgres -h 0.0.0.0 -d benchmark < dump.sql
      - bundle config path .cache
      - bundle install
      - bundle exec rake config
    jobs:
    - name: kore
      commands:
      - cd c/kore && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f c/kore/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: c/kore
    - name: agoo-c
      commands:
      - cd c/agoo-c && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f c/agoo-c/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: c/agoo-c
    epilogue:
      commands:
      - docker logs `cat ${FRAMEWORK}/cid.txt`
- name: ruby
  dependencies:
  - setup
  run:
    when: 'change_in([''/ruby/'',''/data.json''],{pipeline_file: ''ignore''})'
  task:
    prologue:
      commands:
      - cache restore $SEMAPHORE_GIT_SHA
      - cache restore wrk
      - sudo install wrk /usr/local/bin
      - cache restore bin
      - cache restore built-in
      - sem-service start postgres
      - createdb -U postgres -h 0.0.0.0 benchmark
      - psql -U postgres -h 0.0.0.0 -d benchmark < dump.sql
      - bundle config path .cache
      - bundle install
      - bundle exec rake config
    jobs:
    - name: roda
      commands:
      - cd ruby/roda && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f ruby/roda/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: ruby/roda
    - name: rack-routing
      commands:
      - cd ruby/rack-routing && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f ruby/rack-routing/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: ruby/rack-routing
    - name: agoo
      commands:
      - cd ruby/agoo && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f ruby/agoo/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: ruby/agoo
    - name: syro
      commands:
      - cd ruby/syro && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f ruby/syro/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: ruby/syro
    - name: sinatra
      commands:
      - cd ruby/sinatra && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f ruby/sinatra/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: ruby/sinatra
    - name: rails
      commands:
      - cd ruby/rails && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f ruby/rails/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: ruby/rails
    - name: rack_app
      commands:
      - cd ruby/rack_app && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f ruby/rack_app/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: ruby/rack_app
    - name: hanami-api
      commands:
      - cd ruby/hanami-api && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f ruby/hanami-api/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: ruby/hanami-api
    - name: grape
      commands:
      - cd ruby/grape && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f ruby/grape/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: ruby/grape
    - name: cuba
      commands:
      - cd ruby/cuba && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f ruby/cuba/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: ruby/cuba
    - name: camping
      commands:
      - cd ruby/camping && make build  -f .Makefile  && cd -
      - bundle exec rspec .spec
      - make  -f ruby/camping/.Makefile collect
      - bundle exec rake db:raw_export
      env_vars:
      - name: DATABASE_URL
        value: postgresql://postgres@0.0.0.0/benchmark
      - name: DURATION
        value: '10'
      - name: CONCURRENCIES
        value: '64'
      - name: ROUTES
        value: GET:/
      - name: FRAMEWORK
        value: ruby/camping
    epilogue:
      commands:
      - docker logs `cat ${FRAMEWORK}/cid.txt`
